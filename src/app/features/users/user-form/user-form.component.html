<form [formGroup]="form" (ngSubmit)="submit()">
  <div class="form-field">
    <label for="username">Username</label>
    <div class="input-container">
      <i class="material-icons">person</i>
      <input 
        id="username" 
        type="text" 
        formControlName="username" 
        placeholder="admin"
        class="form-input"
      />
    </div>
    @if (hasError('username', 'required')) {
      <div class="field-error">Username is required</div>
    }
    @if (hasError('username', 'containsTest')) {
      <div class="field-error">Username cannot contain "test"</div>
    }
  </div>

  <div class="form-field">
    <label for="role">Role</label>
    <div class="select-container">
      <i class="material-icons">assignment_ind</i>
      <select id="role" formControlName="role" class="form-select">
        <option value="" disabled selected>Select a role</option>
        <option value="admin">Admin</option>
        <option value="user">User</option>
      </select>
    </div>
    @if (hasError('role', 'required')) {
      <div class="field-error">Role is required</div>
    }
  </div>

  <div class="form-field">
    <label for="password">Password</label>
    <div class="input-container">
      <i class="material-icons">lock</i>
      <input 
        id="password" 
        type="password" 
        formControlName="password" 
        placeholder="••••••"
        class="form-input"
      />
    </div>
    <div class="field-hint">
      {{ user()?.id ? 'Leave blank to keep current password' : 'Required for new users' }}
    </div>
    @if (hasError('password', 'required')) {
      <div class="field-error">Password is required for new users</div>
    }
  </div>

  <div class="form-actions">
    <button class="primary-button" type="submit" [disabled]="form.invalid">
      <i class="material-icons">save</i>
      <span>{{ user()?.id ? 'Update User' : 'Create User' }}</span>
    </button>
  </div>
  
  <div class="form-actions" style="margin-top: 16px;">
    <button class="secondary-button" type="button" (click)="cancel.emit()">
      <i class="material-icons">arrow_back</i>
      <span>Back to Users</span>
    </button>
  </div>
</form>
